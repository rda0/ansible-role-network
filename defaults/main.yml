include_network_systemd: False

#network_interface: en*
network_bond: {}
network_vlans: {}
network_bridges: []

network_systemd_domains: phys.ethz.ch ethz.ch
network_systemd_dns_ipv4: 129.132.98.12
network_systemd_dns_ipv6: 2001:67c:10ec::c

network_systemd_restart: True
network_systemd_wipe: False
network_systemd_clean_install: True
network_systemd_template: default_dhcp
network_systemd_network: '{{ network_systemd_network_templates[network_systemd_template] }}'
network_systemd_netdev: '{{ network_systemd_netdev_templates[network_systemd_template] }}'
network_systemd_unit_networking_disable: '{{ network_systemd_clean_install }}'
network_systemd_etc_network_interfaces_truncate: '{{ network_systemd_clean_install }}'
network_systemd_etc_network_interfaces_d_remove: '{{ network_systemd_clean_install }}'
network_systemd_remove_network_manager: '{{ network_systemd_clean_install }}'
network_systemd_remove_netplan: '{{ network_systemd_clean_install }}'
network_systemd_networkd_wait_online_any: False

include_network_kernel_settings: "{{ True if 'bridge' in network_systemd_template else False }}"
network_multiple_interfaces_on_same_subnet: "{{ False if network_interface in network_bridges|map(attribute='name')|flatten else True }}"
network_kernel_settings_filename: "91-net.conf"
network_kernel_settings_file: "/etc/sysctl.d/{{ network_kernel_settings_filename }}"
network_kernel_settings:
  net.ipv4.conf.all.arp_ignore: "{{ '1' if network_multiple_interfaces_on_same_subnet else '0' }}"
  net.ipv4.conf.default.arp_filter: "{{ '1' if network_multiple_interfaces_on_same_subnet else '0' }}"
